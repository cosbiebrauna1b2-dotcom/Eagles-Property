<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dorothy - Property Consultation</title>
<style>
/* Basic Styles */
* { box-sizing: border-box; }
body { 
  margin:0; 
  font-family: Arial,sans-serif; 
  background:#fff; 
  color:#000; 
  overflow-x:hidden;
}
header { background:black; color:gold; padding:1.2rem; text-align:center; }
header h1 { margin:0; font-size:2rem; }
header p { margin:0.3rem 0 0; font-size:1rem; }

/* Hero */
.hero { position:relative; text-align:center; color:white; overflow:hidden; }
.hero img { width:100%; max-height:500px; object-fit:cover; filter:brightness(60%); transition:transform 1.5s ease; }
.hero:hover img { transform:scale(1.05); }
.hero-text { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; padding:0 1rem; }
.hero-text h2 { font-size:2rem; color:gold; margin-bottom:1rem; text-shadow:1px 1px 10px rgba(0,0,0,0.6); }
.hero-text button { padding:0.8rem 1.5rem; background:gold; color:black; border:none; border-radius:8px; font-size:1rem; cursor:pointer; transition:0.3s, box-shadow 0.6s; }
.hero-text button:hover { background:#d4af37; box-shadow:0 0 20px #d4af37; }

/* Modal */
.modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.7); }
.modal-content { background:#000; margin:5% auto; padding:1.5rem; border-radius:12px; width:90%; max-width:500px; color:white; border:2px solid gold; }
.close { float:right; font-size:1.5rem; cursor:pointer; color:gold; }
input, textarea, button { width:100%; padding:0.75rem; margin:0.6rem 0; border-radius:5px; border:1px solid gold; background:#111; color:#fff; font-size:1rem; }
input:invalid { border-color:red; }
textarea { resize:vertical; }
button { background:gold; color:black; font-weight:bold; border:none; cursor:pointer; transition:0.3s, box-shadow 0.6s; }
button:hover { background:#d4af37; box-shadow:0 0 20px #d4af37; }
.success-message { text-align:center; color:gold; display:none; margin-top:1rem; }

/* Hidden Table */
.hidden-table { display:none; }
.table-container {
  width:100%;
  overflow-x:auto;
  margin-top:1rem;
}
table { width:100%; border-collapse:collapse; color:white; background:#111; min-width:600px; }
table, th, td { border:1px solid gold; padding:0.6rem; text-align:center; }
th { background:black; color:gold; }

/* Footer */
footer { background:black; color:gold; text-align:center; padding:1rem; margin-top:1rem; }

/* Media Queries */
@media(max-width:768px){
  header h1{font-size:1.6rem;}
  header p{font-size:0.9rem;}
  .hero-text h2{font-size:1.5rem;}
  .hero-text button{font-size:0.9rem; padding:0.6rem 1rem;}
}
@media(max-width:480px){
  .hero-text h2{font-size:1.2rem;}
  .hero-text button{font-size:0.85rem; padding:0.5rem 0.9rem;}
  table, th, td { font-size:0.8rem; }
}
</style>
</head>
<body>

<header>
<h1>Dorothy’s Property Consulting</h1>
<p>Helping you find the best properties in the UK</p>
</header>

<div class="hero">
<img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c" alt="UK property">
<div class="hero-text">
<h2>Invest in Your Dream Home Today</h2>
<button id="openFormBtn">Book a Free Consultation</button>
</div>
</div>

<div id="consultModal" class="modal">
<div class="modal-content">
<span class="close" id="closeFormBtn">&times;</span>
<h2 style="color: gold; text-align:center;">Book Your Free Consultation</h2>
<form id="bookingForm">
<input type="text" name="full_name" placeholder="Full Name" required>
<input type="email" name="email" placeholder="Email" required>
<input type="tel" name="phone" placeholder="Phone Number" required>
<textarea name="comment" placeholder="Comment (Optional)" rows="4"></textarea>
<input type="hidden" name="timestamp" id="timestamp" required>
<input type="hidden" name="location" id="location" required>
<button type="submit">Submit</button>
</form>
<p class="success-message">Thank you! Your booking has been submitted.</p>
</div>
</div>

<!-- Hidden submissions table (for admin/debug only) -->
<div class="hidden-table">
  <h2 class="section-title">Submitted Bookings</h2>
  <div class="table-container">
    <table id="submissionsTable">
      <thead>
        <tr>
          <th>Full Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Comment</th>
          <th>Timestamp</th>
          <th>Location</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<footer>
<p>© 2025 Dorothy’s Property Consulting | Designed with ♥</p>
</footer>

<script>
// Modal logic
const modal = document.getElementById("consultModal");
const openBtn = document.getElementById("openFormBtn");
const closeBtn = document.getElementById("closeFormBtn");
openBtn.onclick = () => modal.style.display="block";
closeBtn.onclick = () => modal.style.display="none";
window.onclick = (e) => { if(e.target==modal) modal.style.display="none"; }

// Hidden fields
function setHiddenFields(){
  document.getElementById('timestamp').value = new Date().toISOString();
  fetch('https://ipapi.co/json/').then(r=>r.json()).then(d=>{
    document.getElementById('location').value = `${d.city}, ${d.region}, ${d.country_name}`;
  }).catch(err=>console.log('Location error:', err));
}
setHiddenFields();

// Add new row to hidden table
function addRowToTable(data) {
  const tbody = document.querySelector('#submissionsTable tbody');
  const row = document.createElement('tr');
  row.innerHTML = `
    <td>${data.full_name}</td>
    <td>${data.email}</td>
    <td>${data.phone}</td>
    <td>${data.comment || ''}</td>
    <td>${data.timestamp}</td>
    <td>${data.location}</td>
  `;
  tbody.appendChild(row);
}

// Form submission
const form = document.getElementById('bookingForm');
const successMessage = document.querySelector('.success-message');

form.addEventListener('submit', async (e)=>{
  e.preventDefault();
  setHiddenFields();
  const formData = new FormData(form);
  const data = Object.fromEntries(formData.entries());

  // Add to hidden table in background
  addRowToTable(data);

  try {
    await fetch('https://hooks.zapier.com/hooks/catch/23572733/utq04zu/', {
      method:'POST', mode:'no-cors',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify(data)
    });

    // Show success message and reset form
    successMessage.style.display='block';
    form.reset();
    setHiddenFields();
  } catch(err){
    console.error('Error sending data:', err);
    alert('Error sending data: ' + err.message);
  }
});
</script>

</body>
</html>
